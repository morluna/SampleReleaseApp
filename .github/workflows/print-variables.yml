# This is a basic workflow to help you get started with Actions

name: CI

# Controls when the workflow will run
on:
  pull_request:
    types: [opened, labeled, reopened]

  push:
    branches: 
      - release-*.*.*

# A workflow run is made up of one or more jobs that can run sequentially or in parallel
jobs:
        
  # This workflow contains a single job called "build"
  build:
    # We want to run this job if:
    # 1. Workflow was manually triggered (github.event_name == 'workflow_dispatch')
    # 2. If a pull request was opened to merge into `release` (AKA Release Candidate)
    # 3. If a push occured on a `release-*.*.*` branch
    # 4. If a pull request has a 'Build DEV to TestFlight' label either when it was opened OR when it was added by the developer.
    if: ${{ github.event_name == 'workflow_dispatch' || github.base_ref == 'release' || contains(github.ref, 'release-') || github.event.label.name == 'Build DEV to TestFlight' }}
    # The type of runner that the job will run on
    runs-on: ubuntu-latest

    # Steps represent a sequence of tasks that will be executed as part of the job
    steps:
      # Checks-out your repository under $GITHUB_WORKSPACE, so your job can access it
      - uses: actions/checkout@v2

      # Runs a single command using the runners shell
      - name: Echo Run ID
        run: echo ${{ github.run_id }}
      
      - name: Echo Run Number
        run: echo ${{ github.run_number }}
        
      - name: Update Release Notes if Needed
        if: ${{ github.event.inputs.newReleaseNotes }}
        run: echo ${{ github.event.inputs.newReleaseNotes }} 
        
      - name: Echo Inputs
        run: |
         echo ${{ github.base_ref }}
         echo ${{ github.ref }}
